<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prayer Times Baikonur</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/adhans/1.2.1/Adhan.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            background: radial-gradient(circle at top, #0f172a, #020617);
            color: white;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }
        .app { width: 100%; max-width: 400px; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        h1 { font-size: 22px; margin: 0; flex-grow: 1; text-align: center; margin-left: 40px; }
        .menu-btn { background: rgba(255,255,255,0.1); border: none; color: white; width: 40px; height: 40px; border-radius: 50%; }

        /* Главная карточка */
        .main-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        .timer-circle {
            width: 60px; height: 60px; border-radius: 50%;
            border: 2px solid rgba(76, 201, 240, 0.5);
            display: flex; align-items: center; justify-content: center; font-size: 20px;
        }
        .timer-text div:first-child { font-size: 12px; opacity: 0.7; margin-bottom: 5px; }
        .time-now { font-size: 32px; font-weight: bold; letter-spacing: 1px; }

        /* Методы */
        .methods { display: flex; gap: 8px; overflow-x: auto; margin-bottom: 25px; padding-bottom: 5px; }
        .method {
            background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.1);
            padding: 8px 16px; border-radius: 20px; font-size: 14px; white-space: nowrap;
        }
        .method.active { border-color: #4cc9f0; background: rgba(76, 201, 240, 0.1); }

        /* Список молитв */
        .prayer-list { display: flex; flex-direction: column; gap: 12px; }
        .prayer-item {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 25px; padding: 15px 20px;
            display: flex; align-items: center; justify-content: space-between;
        }
        .prayer-item.active { border-color: #4cc9f0; background: rgba(76, 201, 240, 0.05); }
        .p-name { display: flex; flex-direction: column; }
        .p-name span:last-child { font-size: 11px; opacity: 0.5; }
        .p-time-row { display: flex; align-items: center; gap: 15px; }
        .p-time { font-size: 18px; font-weight: 500; }
        .p-icons { display: flex; gap: 10px; opacity: 0.4; font-size: 14px; }
        .dot { width: 8px; height: 8px; background: rgba(255,255,255,0.2); border-radius: 50%; margin-right: 15px; }
        .active .dot { background: #4cc9f0; box-shadow: 0 0 10px #4cc9f0; }
    </style>
</head>
<body>
    <div class="app">
        <div class="header">
            <h1 id="location">Байконур</h1>
            <button class="menu-btn"><i class="fas fa-bars"></i></button>
        </div>

        <div class="main-card">
            <div class="timer-circle"><i class="fas fa-stopwatch"></i></div>
            <div class="timer-text">
                <div>До следующей молитвы</div>
                <div id="countdown" class="time-now">00:00:00</div>
            </div>
            <div id="next-label" style="margin-left: auto; font-size: 13px; opacity: 0.8;"></div>
        </div>

        <div class="methods">
            <div class="method">ISNA</div>
            <div class="method">MWL</div>
            <div class="method active">Umm al-Qura</div>
            <div class="method">Egypt</div>
        </div>

        <div class="prayer-list" id="prayer-list">
            </div>
    </div>

    <script>
        const prayerNames = [
            {en: 'Fajr', ar: 'الفجر'},
            {en: 'Dhuhr', ar: 'الظهر'},
            {en: 'Asr', ar: 'العصر'},
            {en: 'Maghrib', ar: 'المغرب'},
            {en: 'Isha', ar: 'العشاء'}
        ];

        function init() {
            navigator.geolocation.getCurrentPosition(pos => {
                const coords = new adhan.Coordinates(pos.coords.latitude, pos.coords.longitude);
                const params = adhan.CalculationMethod.UmmAlQura();
                const date = new Date();
                const prayerTimes = new adhan.PrayerTimes(coords, date, params);

                function update() {
                    const now = new Date();
                    const next = prayerTimes.nextPrayer();
                    const listContainer = document.getElementById('prayer-list');
                    let html = '';

                    const timesMap = {
                        'fajr': prayerTimes.fajr,
                        'dhuhr': prayerTimes.dhuhr,
                        'asr': prayerTimes.asr,
                        'maghrib': prayerTimes.maghrib,
                        'isha': prayerTimes.isha
                    };

                    prayerNames.forEach(p => {
                        const key = p.en.toLowerCase();
                        const time = timesMap[key];
                        const isActive = next === key;
                        const timeStr = time.toLocaleTimeString('ru-RU', {hour:'2-digit', minute:'2-digit'});
                        
                        html += `
                            <div class="prayer-item ${isActive ? 'active' : ''}">
                                <div style="display:flex; align-items:center;">
                                    <div class="dot"></div>
                                    <div class="p-name">
                                        <b>${p.en}</b>
                                        <span>${p.ar}</span>
                                    </div>
                                </div>
                                <div class="p-time-row">
                                    <span class="p-time">${timeStr}</span>
                                    <div class="p-icons">
                                        <i class="fas fa-pen"></i>
                                        <i class="fas fa-redo"></i>
                                    </div>
                                </div>
                            </div>
                        `;
                        if(isActive) document.getElementById('next-label').innerText = 'до ' + p.en;
                    });

                    listContainer.innerHTML = html;

                    // Таймер
                    const nextTime = prayerTimes.timeForPrayer(next) || prayerTimes.fajr;
                    let diff = nextTime - now;
                    if (diff < 0) diff += 86400000;
                    
                    const h = Math.floor(diff/3600000).toString().padStart(2, '0');
                    const m = Math.floor((diff%3600000)/60000).toString().padStart(2, '0');
                    const s = Math.floor((diff%60000)/1000).toString().padStart(2, '0');
                    document.getElementById('countdown').innerText = `${h}:${m}:${s}`;
                }

                setInterval(update, 1000);
                update();
            }, () => {
                document.getElementById('location').innerText = "Включите GPS";
            });
        }
        init();
    </script>
</body>
</html>
